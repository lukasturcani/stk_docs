

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Selection &mdash; stk  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> stk
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">stk</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_examples.html">Basic Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="cookbook.html">Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_guide.html">Developer Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Molecules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="stk.molecular.molecules.building_block.html">Building Block</a></li>
<li class="toctree-l1"><a class="reference internal" href="stk.molecular.molecules.constructed_molecule.html">Constructed Molecule</a></li>
<li class="toctree-l1"><a class="reference internal" href="stk.molecular.functional_groups.html">Functional Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="stk.populations.html">Populations</a></li>
</ul>
<p class="caption"><span class="caption-text">Topology Graphs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="stk.molecular.topology_graphs.polymer.html">Polymer</a></li>
<li class="toctree-l1"><a class="reference internal" href="stk.molecular.topology_graphs.cage.base.html">Organic Cage</a></li>
<li class="toctree-l1"><a class="reference internal" href="stk.molecular.topology_graphs.cof.html">Covalent Organic Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="stk.molecular.topology_graphs.host_guest.html">Host Guest Complex</a></li>
<li class="toctree-l1"><a class="reference internal" href="stk.molecular.topology_graphs.macrocycle.html">Macrocycle</a></li>
<li class="toctree-l1"><a class="reference internal" href="stk.molecular.topology_graphs.rotaxane.html">Rotaxane</a></li>
<li class="toctree-l1"><a class="reference internal" href="stk.molecular.topology_graphs.topology_graph.html">Adding Topology Graphs</a></li>
</ul>
<p class="caption"><span class="caption-text">Calculators</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="calculators.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="stk.calculators.optimization.optimizers.html">Optimizers</a></li>
<li class="toctree-l1"><a class="reference internal" href="stk.calculators.energy.energy_calculators.html">Energy Calculators</a></li>
</ul>
<p class="caption"><span class="caption-text">Evolutionary Algorithm</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="ea.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="stk.calculators.ea.fitness_calculators.html">Fitness Calculators</a></li>
<li class="toctree-l1"><a class="reference internal" href="stk.calculators.ea.fitness_normalizers.html">Fitness Normalizers</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Selection</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#making-new-selectors">Making New Selectors</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="stk.calculators.ea.mutators.html">Mutation</a></li>
<li class="toctree-l1"><a class="reference internal" href="stk.calculators.ea.crossers.html">Crossover</a></li>
<li class="toctree-l1"><a class="reference internal" href="stk.calculators.ea.terminators.html">Termination</a></li>
<li class="toctree-l1"><a class="reference internal" href="stk.calculators.ea.plotters.html">Plotting</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">stk</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Selection</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/stk.calculators.ea.selectors.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <span class="target" id="module-stk.calculators.ea.selectors"></span><div class="section" id="selection">
<h1>Selection<a class="headerlink" href="#selection" title="Permalink to this headline">¶</a></h1>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#stk.calculators.ea.selectors.Best" title="stk.calculators.ea.selectors.Best"><code class="xref py py-class docutils literal notranslate"><span class="pre">Best</span></code></a></p></li>
<li><p><a class="reference internal" href="#stk.calculators.ea.selectors.Worst" title="stk.calculators.ea.selectors.Worst"><code class="xref py py-class docutils literal notranslate"><span class="pre">Worst</span></code></a></p></li>
<li><p><a class="reference internal" href="#stk.calculators.ea.selectors.Roulette" title="stk.calculators.ea.selectors.Roulette"><code class="xref py py-class docutils literal notranslate"><span class="pre">Roulette</span></code></a></p></li>
<li><p><a class="reference internal" href="#stk.calculators.ea.selectors.AboveAverage" title="stk.calculators.ea.selectors.AboveAverage"><code class="xref py py-class docutils literal notranslate"><span class="pre">AboveAverage</span></code></a></p></li>
<li><p><a class="reference internal" href="#stk.calculators.ea.selectors.Tournament" title="stk.calculators.ea.selectors.Tournament"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tournament</span></code></a></p></li>
<li><p><a class="reference internal" href="#stk.calculators.ea.selectors.StochasticUniversalSampling" title="stk.calculators.ea.selectors.StochasticUniversalSampling"><code class="xref py py-class docutils literal notranslate"><span class="pre">StochasticUniversalSampling</span></code></a></p></li>
<li><p><a class="reference internal" href="#stk.calculators.ea.selectors.SelectorSequence" title="stk.calculators.ea.selectors.SelectorSequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">SelectorSequence</span></code></a></p></li>
<li><p><a class="reference internal" href="#stk.calculators.ea.selectors.RemoveBatches" title="stk.calculators.ea.selectors.RemoveBatches"><code class="xref py py-class docutils literal notranslate"><span class="pre">RemoveBatches</span></code></a></p></li>
<li><p><a class="reference internal" href="#stk.calculators.ea.selectors.RemoveMolecules" title="stk.calculators.ea.selectors.RemoveMolecules"><code class="xref py py-class docutils literal notranslate"><span class="pre">RemoveMolecules</span></code></a></p></li>
<li><p><a class="reference internal" href="#stk.calculators.ea.selectors.FilterBatches" title="stk.calculators.ea.selectors.FilterBatches"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilterBatches</span></code></a></p></li>
<li><p><a class="reference internal" href="#stk.calculators.ea.selectors.FilterMolecules" title="stk.calculators.ea.selectors.FilterMolecules"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilterMolecules</span></code></a></p></li>
</ol>
<p>Selection is carried out by <a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Selector</span></code></a> objects.
Selectors are objects with a <a class="reference internal" href="#stk.calculators.ea.selectors.Selector.select" title="stk.calculators.ea.selectors.Selector.select"><code class="xref py py-meth docutils literal notranslate"><span class="pre">select()</span></code></a>
method, which is used to select batches of molecules from a
<a class="reference internal" href="stk.populations.html#stk.populations.Population" title="stk.populations.Population"><code class="xref py py-class docutils literal notranslate"><span class="pre">Population</span></code></a>. Examples of how <a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Selector</span></code></a> classes can be
used is given their documentation, for example <a class="reference internal" href="#stk.calculators.ea.selectors.Best" title="stk.calculators.ea.selectors.Best"><code class="xref py py-class docutils literal notranslate"><span class="pre">Best</span></code></a>,
:class:.`Roulette` or <a class="reference internal" href="#stk.calculators.ea.selectors.AboveAverage" title="stk.calculators.ea.selectors.AboveAverage"><code class="xref py py-class docutils literal notranslate"><span class="pre">AboveAverage</span></code></a>.</p>
<p>Selectors can be combined to generate more complex selection
processes. For example, let’s say we want to implement elitism.
Elitism is when the best batches are guaranteed to be selected first,
before the selection algorithm is carried out. The
<a class="reference internal" href="#stk.calculators.ea.selectors.SelectorSequence" title="stk.calculators.ea.selectors.SelectorSequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">SelectorSequence</span></code></a> exists precisely for this reason. It takes
two selectors and yields batches from them one after the other</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">stk</span>

<span class="n">population</span> <span class="o">=</span> <span class="n">stk</span><span class="o">.</span><span class="n">Population</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">elite_roulette</span> <span class="o">=</span> <span class="n">stk</span><span class="o">.</span><span class="n">SelectorSequence</span><span class="p">(</span>
    <span class="n">selector1</span><span class="o">=</span><span class="n">stk</span><span class="o">.</span><span class="n">Best</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
    <span class="n">selector2</span><span class="o">=</span><span class="n">stk</span><span class="o">.</span><span class="n">Roulette</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
<span class="p">)</span>
<span class="c1"># Select with Best first and then with Roulette.</span>
<span class="k">for</span> <span class="n">batch</span> <span class="ow">in</span> <span class="n">elite_roulette</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">population</span><span class="p">):</span>
    <span class="c1"># Do stuff with batch.</span>
</pre></div>
</div>
<p>What if you did not want Roulette to yield any batches
selected by <a class="reference internal" href="#stk.calculators.ea.selectors.Best" title="stk.calculators.ea.selectors.Best"><code class="xref py py-class docutils literal notranslate"><span class="pre">Best</span></code></a>? The <a class="reference internal" href="#stk.calculators.ea.selectors.RemoveBatches" title="stk.calculators.ea.selectors.RemoveBatches"><code class="xref py py-class docutils literal notranslate"><span class="pre">RemoveBatches</span></code></a> selector can be
used for this. It takes two selectors, one called a <cite>remover</cite> and one
called a <cite>selector</cite>. It first yields batches of molecules from a
population with the <cite>remover</cite>. It then passes the same population
to the <cite>selector</cite> but prevents it from yielding any batches
selected by the <cite>remover</cite></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">roulette_without_elites</span> <span class="o">=</span> <span class="n">stk</span><span class="o">.</span><span class="n">RemoveBatches</span><span class="p">(</span>
    <span class="n">remover</span><span class="o">=</span><span class="n">stk</span><span class="o">.</span><span class="n">Best</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
    <span class="n">selector</span><span class="o">=</span><span class="n">stk</span><span class="o">.</span><span class="n">Roulettte</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
<span class="p">)</span>
<span class="c1"># Select batches, excluding the top 5.</span>
<span class="k">for</span> <span class="n">batch</span> <span class="ow">in</span> <span class="n">roulette_without_elites</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">population</span><span class="p">):</span>
    <span class="c1"># Do stuff with batch.</span>
</pre></div>
</div>
<p>You can combine <a class="reference internal" href="#stk.calculators.ea.selectors.RemoveBatches" title="stk.calculators.ea.selectors.RemoveBatches"><code class="xref py py-class docutils literal notranslate"><span class="pre">RemoveBatches</span></code></a> and <a class="reference internal" href="#stk.calculators.ea.selectors.SelectorSequence" title="stk.calculators.ea.selectors.SelectorSequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">SelectorSequence</span></code></a>
to get a selector which yields the top 5 batches first and then,
using roulette, selects any of the other batches</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">elite_roulette2</span> <span class="o">=</span> <span class="n">stk</span><span class="o">.</span><span class="n">SelectorSequence</span><span class="p">(</span>
    <span class="n">selector1</span><span class="o">=</span><span class="n">stk</span><span class="o">.</span><span class="n">Best</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
    <span class="n">selector2</span><span class="o">=</span><span class="n">roulette_without_elites</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The same thing can be written more explicitly</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">elite_roulette2</span> <span class="o">=</span> <span class="n">stk</span><span class="o">.</span><span class="n">SelectorSequence</span><span class="p">(</span>
    <span class="n">selector1</span><span class="o">=</span><span class="n">stk</span><span class="o">.</span><span class="n">Best</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
    <span class="n">selector2</span><span class="o">=</span><span class="n">stk</span><span class="o">.</span><span class="n">RemoveBatches</span><span class="p">(</span>
        <span class="n">remover</span><span class="o">=</span><span class="n">stk</span><span class="o">.</span><span class="n">Best</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
        <span class="n">selector</span><span class="o">=</span><span class="n">stk</span><span class="o">.</span><span class="n">Roulette</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
    <span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
<p>You can also explore other combinations with <a class="reference internal" href="#stk.calculators.ea.selectors.FilterBatches" title="stk.calculators.ea.selectors.FilterBatches"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilterBatches</span></code></a>,
<a class="reference internal" href="#stk.calculators.ea.selectors.FilterMolecules" title="stk.calculators.ea.selectors.FilterMolecules"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilterMolecules</span></code></a> and <a class="reference internal" href="#stk.calculators.ea.selectors.RemoveMolecules" title="stk.calculators.ea.selectors.RemoveMolecules"><code class="xref py py-class docutils literal notranslate"><span class="pre">RemoveMolecules</span></code></a>. Examples
using these classes are given in their docstrings.</p>
<div class="section" id="making-new-selectors">
<span id="adding-selectors"></span><h2>Making New Selectors<a class="headerlink" href="#making-new-selectors" title="Permalink to this headline">¶</a></h2>
<p>When a new <a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Selector</span></code></a> class is made it must inherit
<a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Selector</span></code></a> and override the virtual <code class="xref py py-meth docutils literal notranslate"><span class="pre">_select()</span></code>
method.</p>
<dl class="class">
<dt id="stk.calculators.ea.selectors.AboveAverage">
<em class="property">class </em><code class="sig-name descname">AboveAverage</code><span class="sig-paren">(</span><em class="sig-param">num_batches=None</em>, <em class="sig-param">batch_size=1</em>, <em class="sig-param">duplicate_mols=True</em>, <em class="sig-param">duplicate_batches=True</em>, <em class="sig-param">fitness_modifier=None</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.AboveAverage" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">stk.calculators.ea.selectors.Selector</span></code></a></p>
<p>Yields above average batches of molecules.</p>
<p class="rubric">Examples</p>
<p>Yielding molecules one at a time. For example, if molecules need
to be selected for mutation or the next generation</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">stk</span>

<span class="c1"># Make a population holding some molecules.</span>
<span class="n">pop</span> <span class="o">=</span> <span class="n">stk</span><span class="o">.</span><span class="n">Population</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

<span class="c1"># Make the selector.</span>
<span class="n">above_avg</span> <span class="o">=</span> <span class="n">stk</span><span class="o">.</span><span class="n">AboveAverage</span><span class="p">()</span>

<span class="c1"># Select the molecules.</span>
<span class="k">for</span> <span class="n">selected</span><span class="p">,</span> <span class="ow">in</span> <span class="n">above_avg</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">pop</span><span class="p">):</span>
    <span class="c1"># Do stuff with each selected molecule, like apply a</span>
    <span class="c1"># mutation to it to generate a mutant.</span>
    <span class="n">mutant</span> <span class="o">=</span> <span class="n">mutator</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">selected</span><span class="p">)</span>
</pre></div>
</div>
<p>Yielding multiple molecules at once. For example, if molecules need
to be selected for crossover.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">stk</span>

<span class="c1"># Make a population holding some molecules.</span>
<span class="n">pop</span> <span class="o">=</span> <span class="n">stk</span><span class="o">.</span><span class="n">Population</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

<span class="c1"># Make the selector.</span>
<span class="n">above_avg</span> <span class="o">=</span> <span class="n">stk</span><span class="o">.</span><span class="n">AboveAverage</span><span class="p">(</span><span class="n">batch_size</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># Select the molecules.</span>
<span class="k">for</span> <span class="n">selected</span> <span class="ow">in</span> <span class="n">above_avg</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">pop</span><span class="p">):</span>
    <span class="c1"># selected is a tuple of length 2, holding the selected</span>
    <span class="c1"># molecules. You can do stuff with the selected molecules</span>
    <span class="c1"># Like apply crossover operations on them.</span>
    <span class="n">offspring</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">crosser</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="o">*</span><span class="n">selected</span><span class="p">))</span>
</pre></div>
</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#stk.calculators.ea.selectors.AboveAverage.select" title="stk.calculators.ea.selectors.AboveAverage.select"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select</span></code></a>(self, population)</p></td>
<td><p>Select batches of molecules from <cite>population</cite>.</p></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="stk.calculators.ea.selectors.AboveAverage.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">num_batches=None</em>, <em class="sig-param">batch_size=1</em>, <em class="sig-param">duplicate_mols=True</em>, <em class="sig-param">duplicate_batches=True</em>, <em class="sig-param">fitness_modifier=None</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.AboveAverage.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize an <a class="reference internal" href="#stk.calculators.ea.selectors.AboveAverage" title="stk.calculators.ea.selectors.AboveAverage"><code class="xref py py-class docutils literal notranslate"><span class="pre">AboveAverage</span></code></a> instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_batches</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, optional) – The number of batches to yield. If <code class="docutils literal notranslate"><span class="pre">None</span></code> then yielding
will continue forever or until the generator is exhausted,
whichever comes first.</p></li>
<li><p><strong>batch_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, optional) – The number of molecules yielded at once.</p></li>
<li><p><strong>duplicate_mols</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>, optional) – If <code class="docutils literal notranslate"><span class="pre">True</span></code> the same molecule can be yielded in more than
one batch.</p></li>
<li><p><strong>duplicate_batches</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>, optional) – If <code class="docutils literal notranslate"><span class="pre">True</span></code> the same batch can be yielded more than once.</p></li>
<li><p><strong>fitness_modifier</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">callable</span></code>, optional) – Takes the population on which <code class="xref py py-meth docutils literal notranslate"><span class="pre">select`is</span> <span class="pre">called</span> <span class="pre">and</span>
<span class="pre">returns</span> <span class="pre">a</span> <span class="pre">:class:`dict()</span></code> mapping molecules in the population
to the fitness values the <a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Selector</span></code></a> should use.
If <code class="docutils literal notranslate"><span class="pre">None</span></code>, each molecule is mapped to the fitness value
found in its <code class="xref py py-attr docutils literal notranslate"><span class="pre">fitness</span></code> attribute.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="stk.calculators.ea.selectors.AboveAverage.select">
<code class="sig-name descname">select</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">population</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.AboveAverage.select" title="Permalink to this definition">¶</a></dt>
<dd><p>Select batches of molecules from <cite>population</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>population</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">iterable</span></code>) – A collection of molecules from which batches are selected.</p>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p><a class="reference internal" href="#stk.calculators.ea.selectors.Batch" title="stk.calculators.ea.selectors.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a> of <a class="reference internal" href="stk.molecular.molecules.molecule.html#stk.molecular.molecules.molecule.Molecule" title="stk.molecular.molecules.molecule.Molecule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Molecule</span></code></a> – A batch of selected molecules.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="stk.calculators.ea.selectors.Batch">
<em class="property">class </em><code class="sig-name descname">Batch</code><span class="sig-paren">(</span><em class="sig-param">mols</em>, <em class="sig-param">fitness_values</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.Batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Represents a batch of molecules.</p>
<p>Batches can be compared, the comparison is based on their
fitness values. Batches can also be iterated through, this
iterates through all the molecules in the batch.</p>
<p class="rubric">Examples</p>
<p>Sorting batches causes them to be sorted by fitness value.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">batches</span> <span class="o">=</span> <span class="p">(</span><span class="n">Batch</span><span class="p">(</span><span class="o">...</span><span class="p">),</span> <span class="n">Batch</span><span class="p">(</span><span class="o">...</span><span class="p">),</span> <span class="n">Batch</span><span class="p">(</span><span class="o">...</span><span class="p">))</span>
<span class="n">sorted_batches</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">batches</span><span class="p">)</span>
</pre></div>
</div>
<p>Coparison is also based on fitness value</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">batch1</span> <span class="o">=</span> <span class="n">Batch</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">batch2</span> <span class="o">=</span> <span class="n">Batch</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="k">if</span> <span class="n">batch1</span> <span class="o">&gt;</span> <span class="n">batch2</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;batch1 has a larger fitness value than batch2.&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Batches can be iterated through to get the molecules in the
batch</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">batch</span> <span class="o">=</span> <span class="n">Batch</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="k">for</span> <span class="n">mol</span> <span class="ow">in</span> <span class="n">batch</span><span class="p">:</span>
    <span class="c1"># Do stuff with mol.</span>
</pre></div>
</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#stk.calculators.ea.selectors.Batch.get_fitness" title="stk.calculators.ea.selectors.Batch.get_fitness"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_fitness</span></code></a>(self)</p></td>
<td><p>Get the fitness value of the batch.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#stk.calculators.ea.selectors.Batch.get_identity_key" title="stk.calculators.ea.selectors.Batch.get_identity_key"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_identity_key</span></code></a>(self)</p></td>
<td><p>Get the identity key of the batch.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#stk.calculators.ea.selectors.Batch.get_size" title="stk.calculators.ea.selectors.Batch.get_size"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_size</span></code></a>(self)</p></td>
<td><p>Get the number of molecules in the batch.</p></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="stk.calculators.ea.selectors.Batch.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">mols</em>, <em class="sig-param">fitness_values</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.Batch.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize a <a class="reference internal" href="#stk.calculators.ea.selectors.Batch" title="stk.calculators.ea.selectors.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mols</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code> of <a class="reference internal" href="stk.molecular.molecules.molecule.html#stk.molecular.molecules.molecule.Molecule" title="stk.molecular.molecules.molecule.Molecule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Molecule</span></code></a>) – The molecules which are part of the batch.</p></li>
<li><p><strong>fitness_values</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>) – Maps each molecule in <cite>mols</cite> to its fitness value.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="stk.calculators.ea.selectors.Batch.get_fitness">
<code class="sig-name descname">get_fitness</code><span class="sig-paren">(</span><em class="sig-param">self</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.Batch.get_fitness" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the fitness value of the batch.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The fitness value.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="stk.calculators.ea.selectors.Batch.get_identity_key">
<code class="sig-name descname">get_identity_key</code><span class="sig-paren">(</span><em class="sig-param">self</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.Batch.get_identity_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the identity key of the batch.</p>
<p>If two batches hold the same molecules, the same number of
times, they will have the same identity key.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A hashable object which can be used to compare if two
batches are the same.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="stk.calculators.ea.selectors.Batch.get_size">
<code class="sig-name descname">get_size</code><span class="sig-paren">(</span><em class="sig-param">self</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.Batch.get_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the number of molecules in the batch.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The number of molecules in the batch.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="stk.calculators.ea.selectors.Best">
<em class="property">class </em><code class="sig-name descname">Best</code><span class="sig-paren">(</span><em class="sig-param">num_batches=None</em>, <em class="sig-param">batch_size=1</em>, <em class="sig-param">duplicate_mols=True</em>, <em class="sig-param">duplicate_batches=True</em>, <em class="sig-param">fitness_modifier=None</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.Best" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">stk.calculators.ea.selectors.Selector</span></code></a></p>
<p>Selects batches of molecules, highest fitness value first.</p>
<p class="rubric">Examples</p>
<p>Yielding molecules one at a time. For example, if molecules need
to be selected for mutation or the next generation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">stk</span>

<span class="c1"># Make a population holding some molecules.</span>
<span class="n">pop</span> <span class="o">=</span> <span class="n">stk</span><span class="o">.</span><span class="n">Population</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

<span class="c1"># Make the selector.</span>
<span class="n">best</span> <span class="o">=</span> <span class="n">stk</span><span class="o">.</span><span class="n">Best</span><span class="p">()</span>

<span class="c1"># Select the molecules.</span>
<span class="k">for</span> <span class="n">selected</span><span class="p">,</span> <span class="ow">in</span> <span class="n">best</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">pop</span><span class="p">):</span>
    <span class="c1"># Do stuff with each selected molecule, like apply a</span>
    <span class="c1"># mutation to it to generate a mutant.</span>
    <span class="n">mutant</span> <span class="o">=</span> <span class="n">mutator</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">selected</span><span class="p">)</span>
</pre></div>
</div>
<p>Yielding multiple molecules at once. For example, if molecules need
to be selected for crossover.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">stk</span>

<span class="c1"># Make a population holding some molecules.</span>
<span class="n">pop</span> <span class="o">=</span> <span class="n">stk</span><span class="o">.</span><span class="n">Population</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

<span class="c1"># Make the selector.</span>
<span class="n">best</span> <span class="o">=</span> <span class="n">stk</span><span class="o">.</span><span class="n">Best</span><span class="p">(</span><span class="n">batch_size</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># Select the molecules.</span>
<span class="k">for</span> <span class="n">selected</span> <span class="ow">in</span> <span class="n">best</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">pop</span><span class="p">):</span>
    <span class="c1"># selected is a tuple of length 2, holding the selected</span>
    <span class="c1"># molecules. You can do stuff with the selected molecules</span>
    <span class="c1"># Like apply crossover operations on them.</span>
    <span class="n">offspring</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">crosser</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="o">*</span><span class="n">selected</span><span class="p">))</span>
</pre></div>
</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#stk.calculators.ea.selectors.Best.select" title="stk.calculators.ea.selectors.Best.select"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select</span></code></a>(self, population)</p></td>
<td><p>Select batches of molecules from <cite>population</cite>.</p></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="stk.calculators.ea.selectors.Best.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">num_batches=None</em>, <em class="sig-param">batch_size=1</em>, <em class="sig-param">duplicate_mols=True</em>, <em class="sig-param">duplicate_batches=True</em>, <em class="sig-param">fitness_modifier=None</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.Best.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize a <a class="reference internal" href="#stk.calculators.ea.selectors.Best" title="stk.calculators.ea.selectors.Best"><code class="xref py py-class docutils literal notranslate"><span class="pre">Best</span></code></a> instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_batches</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, optional) – The number of batches to yield. If <code class="docutils literal notranslate"><span class="pre">None</span></code> then yielding
will continue forever or until the generator is exhausted,
whichever comes first.</p></li>
<li><p><strong>batch_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, optional) – The number of molecules yielded at once.</p></li>
<li><p><strong>duplicate_mols</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>, optional) – If <code class="docutils literal notranslate"><span class="pre">True</span></code> the same molecule can be yielded in more than
one batch.</p></li>
<li><p><strong>duplicate_batches</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>, optional) – If <code class="docutils literal notranslate"><span class="pre">True</span></code> the same batch can be yielded more than once.</p></li>
<li><p><strong>fitness_modifier</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">callable</span></code>, optional) – Takes the population on which <code class="xref py py-meth docutils literal notranslate"><span class="pre">select`is</span> <span class="pre">called</span> <span class="pre">and</span>
<span class="pre">returns</span> <span class="pre">a</span> <span class="pre">:class:`dict()</span></code> mapping molecules in the population
to the fitness values the <a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Selector</span></code></a> should use.
If <code class="docutils literal notranslate"><span class="pre">None</span></code>, each molecule is mapped to the fitness value
found in its <code class="xref py py-attr docutils literal notranslate"><span class="pre">fitness</span></code> attribute.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="stk.calculators.ea.selectors.Best.select">
<code class="sig-name descname">select</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">population</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.Best.select" title="Permalink to this definition">¶</a></dt>
<dd><p>Select batches of molecules from <cite>population</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>population</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">iterable</span></code>) – A collection of molecules from which batches are selected.</p>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p><a class="reference internal" href="#stk.calculators.ea.selectors.Batch" title="stk.calculators.ea.selectors.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a> of <a class="reference internal" href="stk.molecular.molecules.molecule.html#stk.molecular.molecules.molecule.Molecule" title="stk.molecular.molecules.molecule.Molecule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Molecule</span></code></a> – A batch of selected molecules.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="stk.calculators.ea.selectors.FilterBatches">
<em class="property">class </em><code class="sig-name descname">FilterBatches</code><span class="sig-paren">(</span><em class="sig-param">filter</em>, <em class="sig-param">selector</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.FilterBatches" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">stk.calculators.ea.selectors.Selector</span></code></a></p>
<p>Allows a <a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Selector</span></code></a> to select only some batches.</p>
<p class="rubric">Examples</p>
<p>You only want the <a class="reference internal" href="#stk.calculators.ea.selectors.Best" title="stk.calculators.ea.selectors.Best"><code class="xref py py-class docutils literal notranslate"><span class="pre">Best</span></code></a> 10 batches to participate in
<a class="reference internal" href="#stk.calculators.ea.selectors.Roulette" title="stk.calculators.ea.selectors.Roulette"><code class="xref py py-class docutils literal notranslate"><span class="pre">Roulette</span></code></a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">stk</span>

<span class="n">population</span> <span class="o">=</span> <span class="n">stk</span><span class="o">.</span><span class="n">Population</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">selector</span> <span class="o">=</span> <span class="n">stk</span><span class="o">.</span><span class="n">FilterBatches</span><span class="p">(</span>
    <span class="nb">filter</span><span class="o">=</span><span class="n">stk</span><span class="o">.</span><span class="n">Best</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
    <span class="n">selector</span><span class="o">=</span><span class="n">stk</span><span class="o">.</span><span class="n">Roulette</span><span class="p">(</span><span class="mi">7</span><span class="p">),</span>
<span class="p">)</span>
<span class="k">for</span> <span class="n">batch</span> <span class="ow">in</span> <span class="n">selector</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">population</span><span class="p">):</span>
    <span class="c1"># Do stuff with batch. It is one of the 10 best batches and</span>
    <span class="c1"># was selected using roulette selection.</span>
</pre></div>
</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#stk.calculators.ea.selectors.FilterBatches.select" title="stk.calculators.ea.selectors.FilterBatches.select"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select</span></code></a>(self, population)</p></td>
<td><p>Select batches of molecules from <cite>population</cite>.</p></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="stk.calculators.ea.selectors.FilterBatches.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">filter</em>, <em class="sig-param">selector</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.FilterBatches.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize a <a class="reference internal" href="#stk.calculators.ea.selectors.FilterBatches" title="stk.calculators.ea.selectors.FilterBatches"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilterBatches</span></code></a> instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filter</strong> (<a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Selector</span></code></a>) – Selects batches which can be yielded by <cite>selector</cite>.</p></li>
<li><p><strong>selector</strong> (<a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Selector</span></code></a>) – Selects batches, but only if they were also selected by
<cite>filter</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="stk.calculators.ea.selectors.FilterBatches.select">
<code class="sig-name descname">select</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">population</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.FilterBatches.select" title="Permalink to this definition">¶</a></dt>
<dd><p>Select batches of molecules from <cite>population</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>population</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">iterable</span></code>) – A collection of molecules from which batches are selected.</p>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p><a class="reference internal" href="#stk.calculators.ea.selectors.Batch" title="stk.calculators.ea.selectors.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a> of <a class="reference internal" href="stk.molecular.molecules.molecule.html#stk.molecular.molecules.molecule.Molecule" title="stk.molecular.molecules.molecule.Molecule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Molecule</span></code></a> – A batch of selected molecules.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="stk.calculators.ea.selectors.FilterMolecules">
<em class="property">class </em><code class="sig-name descname">FilterMolecules</code><span class="sig-paren">(</span><em class="sig-param">filter</em>, <em class="sig-param">selector</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.FilterMolecules" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">stk.calculators.ea.selectors.Selector</span></code></a></p>
<p>Allows a <a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Selector</span></code></a> to select only some molecules.</p>
<p class="rubric">Examples</p>
<p>You want to use <a class="reference internal" href="#stk.calculators.ea.selectors.Roulette" title="stk.calculators.ea.selectors.Roulette"><code class="xref py py-class docutils literal notranslate"><span class="pre">Roulette</span></code></a> on the molecules which belong
to the <a class="reference internal" href="#stk.calculators.ea.selectors.Best" title="stk.calculators.ea.selectors.Best"><code class="xref py py-class docutils literal notranslate"><span class="pre">Best</span></code></a> 5 batches of size 3</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">stk</span>

<span class="n">population</span> <span class="o">=</span> <span class="n">stk</span><span class="o">.</span><span class="n">Population</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">selector</span> <span class="o">=</span> <span class="n">stk</span><span class="o">.</span><span class="n">FilterMolecules</span><span class="p">(</span>
    <span class="nb">filter</span><span class="o">=</span><span class="n">stk</span><span class="o">.</span><span class="n">Best</span><span class="p">(</span><span class="n">num_batches</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
    <span class="n">selector</span><span class="o">=</span><span class="n">stk</span><span class="o">.</span><span class="n">Roulette</span><span class="p">(</span><span class="n">num_batches</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
<span class="p">)</span>
<span class="k">for</span> <span class="n">batch</span> <span class="ow">in</span> <span class="n">selector</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">population</span><span class="p">):</span>
    <span class="c1"># Do stuff with batch. All the molecules in the batch</span>
    <span class="c1"># belong to the top 5 batches of size 3. The batch</span>
    <span class="c1"># was selected using roulette selection.</span>
</pre></div>
</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#stk.calculators.ea.selectors.FilterMolecules.select" title="stk.calculators.ea.selectors.FilterMolecules.select"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select</span></code></a>(self, population)</p></td>
<td><p>Select batches of molecules from <cite>population</cite>.</p></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="stk.calculators.ea.selectors.FilterMolecules.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">filter</em>, <em class="sig-param">selector</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.FilterMolecules.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize a <a class="reference internal" href="#stk.calculators.ea.selectors.FilterMolecules" title="stk.calculators.ea.selectors.FilterMolecules"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilterMolecules</span></code></a> instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filter</strong> (<a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Selector</span></code></a>) – Selects molecules which can be yielded by <cite>selector</cite>.</p></li>
<li><p><strong>selector</strong> (<a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Selector</span></code></a>) – Selects batches of molecules. The batches can only
contain molecules yielded by <cite>filter</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="stk.calculators.ea.selectors.FilterMolecules.select">
<code class="sig-name descname">select</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">population</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.FilterMolecules.select" title="Permalink to this definition">¶</a></dt>
<dd><p>Select batches of molecules from <cite>population</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>population</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">iterable</span></code>) – A collection of molecules from which batches are selected.</p>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p><a class="reference internal" href="#stk.calculators.ea.selectors.Batch" title="stk.calculators.ea.selectors.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a> of <a class="reference internal" href="stk.molecular.molecules.molecule.html#stk.molecular.molecules.molecule.Molecule" title="stk.molecular.molecules.molecule.Molecule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Molecule</span></code></a> – A batch of selected molecules.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="stk.calculators.ea.selectors.RemoveBatches">
<em class="property">class </em><code class="sig-name descname">RemoveBatches</code><span class="sig-paren">(</span><em class="sig-param">remover</em>, <em class="sig-param">selector</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.RemoveBatches" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">stk.calculators.ea.selectors.Selector</span></code></a></p>
<p>Prevents a <a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Selector</span></code></a> from selecting some batches.</p>
<p class="rubric">Examples</p>
<p>You want to use <a class="reference internal" href="#stk.calculators.ea.selectors.Roulette" title="stk.calculators.ea.selectors.Roulette"><code class="xref py py-class docutils literal notranslate"><span class="pre">Roulette</span></code></a> selection on all but the
5 <a class="reference internal" href="#stk.calculators.ea.selectors.Worst" title="stk.calculators.ea.selectors.Worst"><code class="xref py py-class docutils literal notranslate"><span class="pre">Worst</span></code></a> batches</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">stk</span>

<span class="n">population</span> <span class="o">=</span> <span class="n">stk</span><span class="o">.</span><span class="n">Population</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">selector</span> <span class="o">=</span> <span class="n">stk</span><span class="o">.</span><span class="n">RemoveBatches</span><span class="p">(</span>
    <span class="n">remover</span><span class="o">=</span><span class="n">stk</span><span class="o">.</span><span class="n">Worst</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
    <span class="n">selector</span><span class="o">=</span><span class="n">stk</span><span class="o">.</span><span class="n">Roulette</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
<span class="p">)</span>
<span class="k">for</span> <span class="n">batch</span> <span class="ow">in</span> <span class="n">selector</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">population</span><span class="p">):</span>
    <span class="c1"># Do stuff with batch. It was selected with roulette</span>
    <span class="c1"># selection and is not one of the worst 5 batches.</span>
</pre></div>
</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#stk.calculators.ea.selectors.RemoveBatches.select" title="stk.calculators.ea.selectors.RemoveBatches.select"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select</span></code></a>(self, population)</p></td>
<td><p>Select batches of molecules from <cite>population</cite>.</p></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="stk.calculators.ea.selectors.RemoveBatches.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">remover</em>, <em class="sig-param">selector</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.RemoveBatches.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize a <a class="reference internal" href="#stk.calculators.ea.selectors.RemoveBatches" title="stk.calculators.ea.selectors.RemoveBatches"><code class="xref py py-class docutils literal notranslate"><span class="pre">RemoveBatches</span></code></a> instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>remover</strong> (<a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Selector</span></code></a>) – Selects batches of molecules, which cannot be yielded by
<cite>selector</cite>.</p></li>
<li><p><strong>selector</strong> (<a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Selector</span></code></a>) – Selects batches of molecules, except those selected by
<cite>remover</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="stk.calculators.ea.selectors.RemoveBatches.select">
<code class="sig-name descname">select</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">population</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.RemoveBatches.select" title="Permalink to this definition">¶</a></dt>
<dd><p>Select batches of molecules from <cite>population</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>population</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">iterable</span></code>) – A collection of molecules from which batches are selected.</p>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p><a class="reference internal" href="#stk.calculators.ea.selectors.Batch" title="stk.calculators.ea.selectors.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a> of <a class="reference internal" href="stk.molecular.molecules.molecule.html#stk.molecular.molecules.molecule.Molecule" title="stk.molecular.molecules.molecule.Molecule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Molecule</span></code></a> – A batch of selected molecules.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="stk.calculators.ea.selectors.RemoveMolecules">
<em class="property">class </em><code class="sig-name descname">RemoveMolecules</code><span class="sig-paren">(</span><em class="sig-param">remover</em>, <em class="sig-param">selector</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.RemoveMolecules" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">stk.calculators.ea.selectors.Selector</span></code></a></p>
<p>Prevents a <a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Selector</span></code></a> from selecting some molecules.</p>
<p class="rubric">Examples</p>
<p>You want to prevent any of the molecules in the <a class="reference internal" href="#stk.calculators.ea.selectors.Best" title="stk.calculators.ea.selectors.Best"><code class="xref py py-class docutils literal notranslate"><span class="pre">Best</span></code></a>
5 batches from being selected by <a class="reference internal" href="#stk.calculators.ea.selectors.Roulette" title="stk.calculators.ea.selectors.Roulette"><code class="xref py py-class docutils literal notranslate"><span class="pre">Roulette</span></code></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">stk</span>

<span class="n">population</span> <span class="o">=</span> <span class="n">stk</span><span class="o">.</span><span class="n">Population</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">selector</span> <span class="o">=</span> <span class="n">stk</span><span class="o">.</span><span class="n">RemoveMolecules</span><span class="p">(</span>
    <span class="n">remover</span><span class="o">=</span><span class="n">stk</span><span class="o">.</span><span class="n">Best</span><span class="p">(</span><span class="n">num_batches</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
    <span class="n">selector</span><span class="o">=</span><span class="n">stk</span><span class="o">.</span><span class="n">Roulette</span><span class="p">(</span><span class="n">num_batches</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span>
<span class="p">)</span>

<span class="k">for</span> <span class="n">batch</span> <span class="ow">in</span> <span class="n">selector</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">population</span><span class="p">):</span>
    <span class="c1"># Do stuff with batch. The batch is guaranteed not to</span>
    <span class="c1"># contain any molecules which are found in the best 5</span>
    <span class="c1"># batches of size 3.</span>
</pre></div>
</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#stk.calculators.ea.selectors.RemoveMolecules.select" title="stk.calculators.ea.selectors.RemoveMolecules.select"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select</span></code></a>(self, population)</p></td>
<td><p>Select batches of molecules from <cite>population</cite>.</p></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="stk.calculators.ea.selectors.RemoveMolecules.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">remover</em>, <em class="sig-param">selector</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.RemoveMolecules.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize a <a class="reference internal" href="#stk.calculators.ea.selectors.RemoveMolecules" title="stk.calculators.ea.selectors.RemoveMolecules"><code class="xref py py-class docutils literal notranslate"><span class="pre">RemoveMolecules</span></code></a> instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>remover</strong> (<a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Selector</span></code></a>) – Selects batches molecules, any molecule selected cannot
be selected by <cite>selector</cite>.</p></li>
<li><p><strong>selector</strong> (<a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Selector</span></code></a>) – Selects batches of molecules, not containing any molecules
selected by <cite>remover</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="stk.calculators.ea.selectors.RemoveMolecules.select">
<code class="sig-name descname">select</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">population</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.RemoveMolecules.select" title="Permalink to this definition">¶</a></dt>
<dd><p>Select batches of molecules from <cite>population</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>population</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">iterable</span></code>) – A collection of molecules from which batches are selected.</p>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p><a class="reference internal" href="#stk.calculators.ea.selectors.Batch" title="stk.calculators.ea.selectors.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a> of <a class="reference internal" href="stk.molecular.molecules.molecule.html#stk.molecular.molecules.molecule.Molecule" title="stk.molecular.molecules.molecule.Molecule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Molecule</span></code></a> – A batch of selected molecules.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="stk.calculators.ea.selectors.Roulette">
<em class="property">class </em><code class="sig-name descname">Roulette</code><span class="sig-paren">(</span><em class="sig-param">num_batches=None</em>, <em class="sig-param">batch_size=1</em>, <em class="sig-param">duplicate_mols=True</em>, <em class="sig-param">duplicate_batches=True</em>, <em class="sig-param">fitness_modifier=None</em>, <em class="sig-param">random_seed=None</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.Roulette" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">stk.calculators.ea.selectors.Selector</span></code></a></p>
<p>Uses roulette selection to select batches of molecules.</p>
<p>In roulette selection the probability a batch is selected
is given by its fitness. If the total fitness is the sum of all
fitness values, the chance a batch is selected is given
by:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">batch</span> <span class="n">fitness</span> <span class="o">/</span> <span class="n">total</span> <span class="n">fitness</span><span class="p">,</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">p</span></code> is the probability of selection and the batch
fitness is the sum of all fitness values of molecules in the
batch <a class="footnote-reference brackets" href="#id2" id="id1">1</a>.</p>
<p class="rubric">References</p>
<dl class="footnote brackets">
<dt class="label" id="id2"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p><a class="reference external" href="http://tinyurl.com/csc3djm">http://tinyurl.com/csc3djm</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Yielding molecules one at a time. For example, if molecules need
to be selected for mutation or the next generation</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">stk</span>

<span class="c1"># Make a population holding some molecules.</span>
<span class="n">pop</span> <span class="o">=</span> <span class="n">stk</span><span class="o">.</span><span class="n">Population</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

<span class="c1"># Make the selector.</span>
<span class="n">roulette</span> <span class="o">=</span> <span class="n">stk</span><span class="o">.</span><span class="n">Roulette</span><span class="p">()</span>

<span class="c1"># Select the molecules.</span>
<span class="k">for</span> <span class="n">selected</span><span class="p">,</span> <span class="ow">in</span> <span class="n">roulette</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">pop</span><span class="p">):</span>
    <span class="c1"># Do stuff with each selected molecule, like apply a</span>
    <span class="c1"># mutation to it to generate a mutant.</span>
    <span class="n">mutant</span> <span class="o">=</span> <span class="n">mutator</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">selected</span><span class="p">)</span>
</pre></div>
</div>
<p>Yielding multiple molecules at once. For example, if molecules need
to be selected for crossover</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Make a population holding some molecules.</span>
<span class="n">pop</span> <span class="o">=</span> <span class="n">stk</span><span class="o">.</span><span class="n">Population</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

<span class="c1"># Make the selector.</span>
<span class="n">roulette</span> <span class="o">=</span> <span class="n">stk</span><span class="o">.</span><span class="n">Roulette</span><span class="p">(</span><span class="n">batch_size</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># Select the molecules.</span>
<span class="k">for</span> <span class="n">selected</span> <span class="ow">in</span> <span class="n">roulette</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">pop</span><span class="p">):</span>
    <span class="c1"># selected is a tuple of length 2, holding the selected</span>
    <span class="c1"># molecules. You can do stuff with the selected molecules</span>
    <span class="c1"># Like apply crossover operations on them.</span>
    <span class="n">offspring</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">crosser</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="o">*</span><span class="n">selected</span><span class="p">))</span>
</pre></div>
</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#stk.calculators.ea.selectors.Roulette.select" title="stk.calculators.ea.selectors.Roulette.select"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select</span></code></a>(self, population)</p></td>
<td><p>Select batches of molecules from <cite>population</cite>.</p></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="stk.calculators.ea.selectors.Roulette.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">num_batches=None</em>, <em class="sig-param">batch_size=1</em>, <em class="sig-param">duplicate_mols=True</em>, <em class="sig-param">duplicate_batches=True</em>, <em class="sig-param">fitness_modifier=None</em>, <em class="sig-param">random_seed=None</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.Roulette.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize a <a class="reference internal" href="#stk.calculators.ea.selectors.Roulette" title="stk.calculators.ea.selectors.Roulette"><code class="xref py py-class docutils literal notranslate"><span class="pre">Roulette</span></code></a> instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_batches</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, optional) – The number of batches to yield. If <code class="docutils literal notranslate"><span class="pre">None</span></code> then yielding
will continue forever or until the generator is exhausted,
whichever comes first.</p></li>
<li><p><strong>batch_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, optional) – The number of molecules yielded at once.</p></li>
<li><p><strong>duplicate_mols</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>, optional) – If <code class="docutils literal notranslate"><span class="pre">True</span></code> the same molecule can be yielded in more than
one batch.</p></li>
<li><p><strong>duplicate_batches</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>, optional) – If <code class="docutils literal notranslate"><span class="pre">True</span></code> the same batch can be yielded more than once.</p></li>
<li><p><strong>fitness_modifier</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">callable</span></code>, optional) – Takes the population on which <code class="xref py py-meth docutils literal notranslate"><span class="pre">select`is</span> <span class="pre">called</span> <span class="pre">and</span>
<span class="pre">returns</span> <span class="pre">a</span> <span class="pre">:class:`dict()</span></code> mapping molecules in the population
to the fitness values the <a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Selector</span></code></a> should use.
If <code class="docutils literal notranslate"><span class="pre">None</span></code>, each molecule is mapped to the fitness value
found in its <code class="xref py py-attr docutils literal notranslate"><span class="pre">fitness</span></code> attribute.</p></li>
<li><p><strong>random_seed</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, optional) – The random seed to use.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="stk.calculators.ea.selectors.Roulette.select">
<code class="sig-name descname">select</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">population</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.Roulette.select" title="Permalink to this definition">¶</a></dt>
<dd><p>Select batches of molecules from <cite>population</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>population</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">iterable</span></code>) – A collection of molecules from which batches are selected.</p>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p><a class="reference internal" href="#stk.calculators.ea.selectors.Batch" title="stk.calculators.ea.selectors.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a> of <a class="reference internal" href="stk.molecular.molecules.molecule.html#stk.molecular.molecules.molecule.Molecule" title="stk.molecular.molecules.molecule.Molecule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Molecule</span></code></a> – A batch of selected molecules.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="stk.calculators.ea.selectors.Selector">
<em class="property">class </em><code class="sig-name descname">Selector</code><span class="sig-paren">(</span><em class="sig-param">num_batches</em>, <em class="sig-param">batch_size</em>, <em class="sig-param">duplicate_mols</em>, <em class="sig-param">duplicate_batches</em>, <em class="sig-param">fitness_modifier</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.Selector" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Selects batches of molecules from a population.</p>
<p>Molecules are selected in batches, and each batch is selected
based on its fitness. The fitness of a batch is the sum of all
fitness values of the molecules in the batch. Batches may be of
size 1, if single molecules are to be yielded.</p>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#stk.calculators.ea.selectors.Selector.select" title="stk.calculators.ea.selectors.Selector.select"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select</span></code></a>(self, population)</p></td>
<td><p>Select batches of molecules from <cite>population</cite>.</p></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="stk.calculators.ea.selectors.Selector.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">num_batches</em>, <em class="sig-param">batch_size</em>, <em class="sig-param">duplicate_mols</em>, <em class="sig-param">duplicate_batches</em>, <em class="sig-param">fitness_modifier</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.Selector.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize a <a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Selector</span></code></a> instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_batches</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of batches to yield. If <code class="docutils literal notranslate"><span class="pre">None</span></code> then yielding
will continue forever or until the generator is exhausted,
whichever comes first.</p></li>
<li><p><strong>batch_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>) – The number of molecules yielded at once.</p></li>
<li><p><strong>duplicate_mols</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code> the same molecule can be yielded in more than
one batch.</p></li>
<li><p><strong>duplicate_batches</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code> the same batch can be yielded more than once.</p></li>
<li><p><strong>fitness_modifier</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">callable</span></code>) – Takes the population on which <code class="xref py py-meth docutils literal notranslate"><span class="pre">select`is</span> <span class="pre">called</span> <span class="pre">and</span>
<span class="pre">returns</span> <span class="pre">a</span> <span class="pre">:class:`dict()</span></code> mapping molecules in the population
to the fitness values the <a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Selector</span></code></a> should use.
If <code class="docutils literal notranslate"><span class="pre">None</span></code>, each molecule is mapped to the fitness value
found in its <code class="xref py py-attr docutils literal notranslate"><span class="pre">fitness</span></code> attribute.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="stk.calculators.ea.selectors.Selector.select">
<code class="sig-name descname">select</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">population</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.Selector.select" title="Permalink to this definition">¶</a></dt>
<dd><p>Select batches of molecules from <cite>population</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>population</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">iterable</span></code>) – A collection of molecules from which batches are selected.</p>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p><a class="reference internal" href="#stk.calculators.ea.selectors.Batch" title="stk.calculators.ea.selectors.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a> of <a class="reference internal" href="stk.molecular.molecules.molecule.html#stk.molecular.molecules.molecule.Molecule" title="stk.molecular.molecules.molecule.Molecule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Molecule</span></code></a> – A batch of selected molecules.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="stk.calculators.ea.selectors.SelectorSequence">
<em class="property">class </em><code class="sig-name descname">SelectorSequence</code><span class="sig-paren">(</span><em class="sig-param">selector1</em>, <em class="sig-param">selector2</em>, <em class="sig-param">num_batches=None</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.SelectorSequence" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">stk.calculators.ea.selectors.Selector</span></code></a></p>
<p>Yields from selectors in order.</p>
<p class="rubric">Examples</p>
<p>First use <a class="reference internal" href="#stk.calculators.ea.selectors.Best" title="stk.calculators.ea.selectors.Best"><code class="xref py py-class docutils literal notranslate"><span class="pre">Best</span></code></a> to select the 10 best batches and
then use <a class="reference internal" href="#stk.calculators.ea.selectors.Roulette" title="stk.calculators.ea.selectors.Roulette"><code class="xref py py-class docutils literal notranslate"><span class="pre">Roulette</span></code></a> to select batches in proportion to
their fitness</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">stk</span>

<span class="n">population</span> <span class="o">=</span> <span class="n">stk</span><span class="o">.</span><span class="n">Population</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">selector</span> <span class="o">=</span> <span class="n">stk</span><span class="o">.</span><span class="n">SelectorSequence</span><span class="p">(</span>
    <span class="n">selector1</span><span class="o">=</span><span class="n">stk</span><span class="o">.</span><span class="n">Best</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
    <span class="n">selector2</span><span class="o">=</span><span class="n">stk</span><span class="o">.</span><span class="n">Roulette</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
<span class="p">)</span>
<span class="k">for</span> <span class="n">batch</span> <span class="ow">in</span> <span class="n">selector</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">population</span><span class="p">):</span>
    <span class="c1"># Do stuff with batch. Batches are first selected with</span>
    <span class="c1"># Best(10) and then with Roulette(20).</span>
</pre></div>
</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#stk.calculators.ea.selectors.SelectorSequence.select" title="stk.calculators.ea.selectors.SelectorSequence.select"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select</span></code></a>(self, population)</p></td>
<td><p>Select batches of molecules from <cite>population</cite>.</p></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="stk.calculators.ea.selectors.SelectorSequence.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">selector1</em>, <em class="sig-param">selector2</em>, <em class="sig-param">num_batches=None</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.SelectorSequence.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize a <a class="reference internal" href="#stk.calculators.ea.selectors.SelectorSequence" title="stk.calculators.ea.selectors.SelectorSequence"><code class="xref py py-class docutils literal notranslate"><span class="pre">SelectorSequence</span></code></a> instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>selector1</strong> (<a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Selector</span></code></a>) – The selector from which batches are yielded first.</p></li>
<li><p><strong>selector2</strong> (<a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Selector</span></code></a>) – The selector from which batches are yielded second.</p></li>
<li><p><strong>num_batches</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, optional) – The maximum number of batches which can be yielded across
the entire sequence.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="stk.calculators.ea.selectors.SelectorSequence.select">
<code class="sig-name descname">select</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">population</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.SelectorSequence.select" title="Permalink to this definition">¶</a></dt>
<dd><p>Select batches of molecules from <cite>population</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>population</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">iterable</span></code>) – A collection of molecules from which batches are selected.</p>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p><a class="reference internal" href="#stk.calculators.ea.selectors.Batch" title="stk.calculators.ea.selectors.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a> of <a class="reference internal" href="stk.molecular.molecules.molecule.html#stk.molecular.molecules.molecule.Molecule" title="stk.molecular.molecules.molecule.Molecule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Molecule</span></code></a> – A batch of selected molecules.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="stk.calculators.ea.selectors.StochasticUniversalSampling">
<em class="property">class </em><code class="sig-name descname">StochasticUniversalSampling</code><span class="sig-paren">(</span><em class="sig-param">num_batches=None</em>, <em class="sig-param">batch_size=1</em>, <em class="sig-param">duplicate_mols=True</em>, <em class="sig-param">duplicate_batches=True</em>, <em class="sig-param">fitness_modifier=None</em>, <em class="sig-param">random_seed=None</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.StochasticUniversalSampling" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">stk.calculators.ea.selectors.Selector</span></code></a></p>
<p>Yields batches of molecules through stochastic universal sampling.</p>
<p>Stochastic universal sampling lays out batches along a line, with
each batch taking up length proprotional to its fitness. It
then creates a set of evenly spaced pointers to different points
on the line, each of which is occupied by a batch. Batches which
are pointed to are yielded.</p>
<p>This approach means weaker members of the population
are given a greater chance to be chosen than in
<a class="reference internal" href="#stk.calculators.ea.selectors.Roulette" title="stk.calculators.ea.selectors.Roulette"><code class="xref py py-class docutils literal notranslate"><span class="pre">Roulette</span></code></a> selection <a class="footnote-reference brackets" href="#id4" id="id3">2</a>.</p>
<p class="rubric">References</p>
<dl class="footnote brackets">
<dt class="label" id="id4"><span class="brackets"><a class="fn-backref" href="#id3">2</a></span></dt>
<dd><p><a class="reference external" href="https://en.wikipedia.org/wiki/Stochastic_universal_sampling">https://en.wikipedia.org/wiki/Stochastic_universal_sampling</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Yielding molecules one at a time. For example, if molecules need
to be selected for mutation or the next generation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">stk</span>

<span class="c1"># Make a population holding some molecules.</span>
<span class="n">pop</span> <span class="o">=</span> <span class="n">stk</span><span class="o">.</span><span class="n">Population</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

<span class="c1"># Make the selector.</span>
<span class="n">stochastic_sampling</span> <span class="o">=</span> <span class="n">stk</span><span class="o">.</span><span class="n">StochasticUniversalSampling</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

<span class="c1"># Select the molecules.</span>
<span class="k">for</span> <span class="n">selected</span><span class="p">,</span> <span class="ow">in</span> <span class="n">stochastic_sampling</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">pop</span><span class="p">):</span>
    <span class="c1"># Do stuff with each selected molecule, like apply a</span>
    <span class="c1"># mutation to it to generate a mutant.</span>
    <span class="n">mutant</span> <span class="o">=</span> <span class="n">mutator</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">selected</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#stk.calculators.ea.selectors.StochasticUniversalSampling.select" title="stk.calculators.ea.selectors.StochasticUniversalSampling.select"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select</span></code></a>(self, population)</p></td>
<td><p>Select batches of molecules from <cite>population</cite>.</p></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="stk.calculators.ea.selectors.StochasticUniversalSampling.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">num_batches=None</em>, <em class="sig-param">batch_size=1</em>, <em class="sig-param">duplicate_mols=True</em>, <em class="sig-param">duplicate_batches=True</em>, <em class="sig-param">fitness_modifier=None</em>, <em class="sig-param">random_seed=None</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.StochasticUniversalSampling.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize a <a class="reference internal" href="#stk.calculators.ea.selectors.StochasticUniversalSampling" title="stk.calculators.ea.selectors.StochasticUniversalSampling"><code class="xref py py-class docutils literal notranslate"><span class="pre">StochasticUniversalSampling</span></code></a> instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_batches</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, optional) – The number of batches to yield. If <code class="docutils literal notranslate"><span class="pre">None</span></code> then yielding
will continue forever or until the generator is exhausted,
whichever comes first.</p></li>
<li><p><strong>batch_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, optional) – The number of molecules yielded at once.</p></li>
<li><p><strong>duplicate_mols</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>, optional) – If <code class="docutils literal notranslate"><span class="pre">True</span></code> the same molecule can be yielded in more than
one batch.</p></li>
<li><p><strong>duplicate_batches</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>, optional) – If <code class="docutils literal notranslate"><span class="pre">True</span></code> the same batch can be yielded more than once.</p></li>
<li><p><strong>fitness_modifier</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">callable</span></code>, optional) – Takes the population on which <code class="xref py py-meth docutils literal notranslate"><span class="pre">select`is</span> <span class="pre">called</span> <span class="pre">and</span>
<span class="pre">returns</span> <span class="pre">a</span> <span class="pre">:class:`dict()</span></code> mapping molecules in the population
to the fitness values the <a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Selector</span></code></a> should use.
If <code class="docutils literal notranslate"><span class="pre">None</span></code>, each molecule is mapped to the fitness value
found in its <code class="xref py py-attr docutils literal notranslate"><span class="pre">fitness</span></code> attribute.</p></li>
<li><p><strong>random_seed</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, optional) – The random seed to use.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="stk.calculators.ea.selectors.StochasticUniversalSampling.select">
<code class="sig-name descname">select</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">population</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.StochasticUniversalSampling.select" title="Permalink to this definition">¶</a></dt>
<dd><p>Select batches of molecules from <cite>population</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>population</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">iterable</span></code>) – A collection of molecules from which batches are selected.</p>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p><a class="reference internal" href="#stk.calculators.ea.selectors.Batch" title="stk.calculators.ea.selectors.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a> of <a class="reference internal" href="stk.molecular.molecules.molecule.html#stk.molecular.molecules.molecule.Molecule" title="stk.molecular.molecules.molecule.Molecule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Molecule</span></code></a> – A batch of selected molecules.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="stk.calculators.ea.selectors.Tournament">
<em class="property">class </em><code class="sig-name descname">Tournament</code><span class="sig-paren">(</span><em class="sig-param">num_batches=None</em>, <em class="sig-param">batch_size=1</em>, <em class="sig-param">duplicate_mols=True</em>, <em class="sig-param">duplicate_batches=True</em>, <em class="sig-param">fitness_modifier=None</em>, <em class="sig-param">random_seed=None</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.Tournament" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">stk.calculators.ea.selectors.Selector</span></code></a></p>
<p>Yields batches of molecules through tournament selection.</p>
<p>In tournament selection, a random number of batches is chosen from
the population undergo a competition. In each competition, the
batch with the highest fitness value is yielded. This is repeated
until <cite>num_batches</cite> are yielded.</p>
<p class="rubric">Examples</p>
<p>Yielding molecules one at a time. For example, if molecules need
to be selected for mutation or the next generation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">stk</span>

<span class="c1"># Make a population holding some molecules.</span>
<span class="n">pop</span> <span class="o">=</span> <span class="n">stk</span><span class="o">.</span><span class="n">Population</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

<span class="c1"># Make the selector.</span>
<span class="n">tournament</span> <span class="o">=</span> <span class="n">stk</span><span class="o">.</span><span class="n">Tournament</span><span class="p">(</span>
    <span class="n">num_batches</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">batch_size</span><span class="o">=</span><span class="mi">1</span>
<span class="p">)</span>

<span class="c1"># Select the molecules.</span>
<span class="k">for</span> <span class="n">selected</span><span class="p">,</span> <span class="ow">in</span> <span class="n">tournament</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">pop</span><span class="p">):</span>
    <span class="c1"># Do stuff with each selected molecule, like apply a</span>
    <span class="c1"># mutation to it to generate a mutant.</span>
    <span class="n">mutant</span> <span class="o">=</span> <span class="n">mutator</span><span class="o">.</span><span class="n">mutate</span><span class="p">(</span><span class="n">selected</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#stk.calculators.ea.selectors.Tournament.select" title="stk.calculators.ea.selectors.Tournament.select"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select</span></code></a>(self, population)</p></td>
<td><p>Select batches of molecules from <cite>population</cite>.</p></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="stk.calculators.ea.selectors.Tournament.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">num_batches=None</em>, <em class="sig-param">batch_size=1</em>, <em class="sig-param">duplicate_mols=True</em>, <em class="sig-param">duplicate_batches=True</em>, <em class="sig-param">fitness_modifier=None</em>, <em class="sig-param">random_seed=None</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.Tournament.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize a <a class="reference internal" href="#stk.calculators.ea.selectors.Tournament" title="stk.calculators.ea.selectors.Tournament"><code class="xref py py-class docutils literal notranslate"><span class="pre">Tournament</span></code></a> instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_batches</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, optional) – The number of batches to yield. If <code class="docutils literal notranslate"><span class="pre">None</span></code> then yielding
will continue forever or until the generator is exhausted,
whichever comes first.</p></li>
<li><p><strong>batch_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, optional) – The number of molecules yielded at once.</p></li>
<li><p><strong>duplicate_mols</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>, optional) – If <code class="docutils literal notranslate"><span class="pre">True</span></code> the same molecule can be yielded in more than
one batch.</p></li>
<li><p><strong>duplicate_batches</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>, optional) – If <code class="docutils literal notranslate"><span class="pre">True</span></code> the same batch can be yielded more than once.</p></li>
<li><p><strong>fitness_modifier</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">callable</span></code>, optional) – Takes the population on which <code class="xref py py-meth docutils literal notranslate"><span class="pre">select`is</span> <span class="pre">called</span> <span class="pre">and</span>
<span class="pre">returns</span> <span class="pre">a</span> <span class="pre">:class:`dict()</span></code> mapping molecules in the population
to the fitness values the <a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Selector</span></code></a> should use.
If <code class="docutils literal notranslate"><span class="pre">None</span></code>, each molecule is mapped to the fitness value
found in its <code class="xref py py-attr docutils literal notranslate"><span class="pre">fitness</span></code> attribute.</p></li>
<li><p><strong>random_seed</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, optional) – The random seed to use.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="stk.calculators.ea.selectors.Tournament.select">
<code class="sig-name descname">select</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">population</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.Tournament.select" title="Permalink to this definition">¶</a></dt>
<dd><p>Select batches of molecules from <cite>population</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>population</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">iterable</span></code>) – A collection of molecules from which batches are selected.</p>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p><a class="reference internal" href="#stk.calculators.ea.selectors.Batch" title="stk.calculators.ea.selectors.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a> of <a class="reference internal" href="stk.molecular.molecules.molecule.html#stk.molecular.molecules.molecule.Molecule" title="stk.molecular.molecules.molecule.Molecule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Molecule</span></code></a> – A batch of selected molecules.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="stk.calculators.ea.selectors.Worst">
<em class="property">class </em><code class="sig-name descname">Worst</code><span class="sig-paren">(</span><em class="sig-param">num_batches=None</em>, <em class="sig-param">batch_size=1</em>, <em class="sig-param">duplicate_mols=True</em>, <em class="sig-param">duplicate_batches=True</em>, <em class="sig-param">fitness_modifier=None</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.Worst" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">stk.calculators.ea.selectors.Selector</span></code></a></p>
<p>Selects batches of molecules, lowest fitness value first.</p>
<p class="rubric">Examples</p>
<p>Select the worst 5 batches of size 3</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">stk</span>

<span class="n">population</span> <span class="o">=</span> <span class="n">stk</span><span class="o">.</span><span class="n">Population</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">worst</span> <span class="o">=</span> <span class="n">stk</span><span class="o">.</span><span class="n">Worst</span><span class="p">(</span><span class="n">num_batches</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="k">for</span> <span class="n">batch</span> <span class="ow">in</span> <span class="n">worst</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">population</span><span class="p">):</span>
    <span class="c1"># Do stuff with batch.</span>
</pre></div>
</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#stk.calculators.ea.selectors.Worst.select" title="stk.calculators.ea.selectors.Worst.select"><code class="xref py py-obj docutils literal notranslate"><span class="pre">select</span></code></a>(self, population)</p></td>
<td><p>Select batches of molecules from <cite>population</cite>.</p></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="stk.calculators.ea.selectors.Worst.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">num_batches=None</em>, <em class="sig-param">batch_size=1</em>, <em class="sig-param">duplicate_mols=True</em>, <em class="sig-param">duplicate_batches=True</em>, <em class="sig-param">fitness_modifier=None</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.Worst.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize a <a class="reference internal" href="#stk.calculators.ea.selectors.Worst" title="stk.calculators.ea.selectors.Worst"><code class="xref py py-class docutils literal notranslate"><span class="pre">Worst</span></code></a> instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_batches</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, optional) – The number of batches to yield. If <code class="docutils literal notranslate"><span class="pre">None</span></code> then yielding
will continue forever or until the generator is exhausted,
whichever comes first.</p></li>
<li><p><strong>batch_size</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, optional) – The number of molecules yielded at once.</p></li>
<li><p><strong>duplicate_mols</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>, optional) – If <code class="docutils literal notranslate"><span class="pre">True</span></code> the same molecule can be yielded in more than
one batch.</p></li>
<li><p><strong>duplicate_batches</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code>, optional) – If <code class="docutils literal notranslate"><span class="pre">True</span></code> the same batch can be yielded more than once.</p></li>
<li><p><strong>fitness_modifier</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">callable</span></code>, optional) – Takes the population on which <code class="xref py py-meth docutils literal notranslate"><span class="pre">select`is</span> <span class="pre">called</span> <span class="pre">and</span>
<span class="pre">returns</span> <span class="pre">a</span> <span class="pre">:class:`dict()</span></code> mapping molecules in the population
to the fitness values the <a class="reference internal" href="#stk.calculators.ea.selectors.Selector" title="stk.calculators.ea.selectors.Selector"><code class="xref py py-class docutils literal notranslate"><span class="pre">Selector</span></code></a> should use.
If <code class="docutils literal notranslate"><span class="pre">None</span></code>, each molecule is mapped to the fitness value
found in its <code class="xref py py-attr docutils literal notranslate"><span class="pre">fitness</span></code> attribute.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="stk.calculators.ea.selectors.Worst.select">
<code class="sig-name descname">select</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">population</em><span class="sig-paren">)</span><a class="headerlink" href="#stk.calculators.ea.selectors.Worst.select" title="Permalink to this definition">¶</a></dt>
<dd><p>Select batches of molecules from <cite>population</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>population</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">iterable</span></code>) – A collection of molecules from which batches are selected.</p>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p><a class="reference internal" href="#stk.calculators.ea.selectors.Batch" title="stk.calculators.ea.selectors.Batch"><code class="xref py py-class docutils literal notranslate"><span class="pre">Batch</span></code></a> of <a class="reference internal" href="stk.molecular.molecules.molecule.html#stk.molecular.molecules.molecule.Molecule" title="stk.molecular.molecules.molecule.Molecule"><code class="xref py py-class docutils literal notranslate"><span class="pre">Molecule</span></code></a> – A batch of selected molecules.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Lukas Turcani

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>